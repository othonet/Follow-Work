<div class="container mx-auto px-4 py-4 sm:py-8 max-w-2xl">
    <div class="mb-6 sm:mb-8">
        <a href="/admin/clients" class="text-blue-400 hover:text-blue-300 mb-4 inline-block text-sm sm:text-base">← Voltar</a>
        <h1 class="text-2xl sm:text-4xl font-bold mb-2">{{#if client}}Editar{{else}}Novo{{/if}} Cliente</h1>
    </div>

    {{#if error}}
        <div class="bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded mb-4">
            {{error}}
        </div>
    {{/if}}

    <form action="/admin/clients{{#if client}}/{{client.id}}{{/if}}" method="POST" class="bg-gray-800 rounded-lg p-6 border border-gray-700">
        <div class="mb-4">
            <label for="name" class="block text-sm font-medium mb-2">Nome *</label>
            <input type="text" 
                   id="name" 
                   name="name" 
                   value="{{client.name}}"
                   required
                   class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white">
        </div>

        <div class="mb-4">
            <label for="username" class="block text-sm font-medium mb-2">Nome de Usuário *</label>
            <input type="text" 
                   id="username" 
                   name="username" 
                   value="{{client.username}}"
                   required
                   placeholder="usuario123"
                   class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white">
            <p class="text-gray-400 text-xs mt-1">Usado para fazer login no sistema</p>
        </div>

        <div class="mb-4">
            <label for="email" class="block text-sm font-medium mb-2">Email (opcional)</label>
            <input type="email" 
                   id="email" 
                   name="email" 
                   value="{{client.email}}"
                   placeholder="cliente@exemplo.com"
                   class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white">
        </div>

        <div class="mb-6">
            <label for="password" class="block text-sm font-medium mb-2">
                Senha {{#if client}}(deixe em branco para não alterar){{else}}*{{/if}}
            </label>
            <input type="password" 
                   id="password" 
                   name="password" 
                   {{#unless client}}required{{/unless}}
                   class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white">
        </div>

        <div class="mb-6">
            <label class="block text-sm font-medium mb-3">Projetos com Acesso *</label>
            <div class="bg-gray-700 rounded-lg p-4 max-h-60 overflow-y-auto border border-gray-600">
                {{#if projects}}
                    {{#each projects}}
                        <div class="mb-2">
                            <label class="flex items-center cursor-pointer hover:bg-gray-600 p-2 rounded transition-colors">
                                <input type="checkbox" 
                                       name="projects" 
                                       value="{{id}}"
                                       {{#if ../client}}
                                           {{#if (inArray ../client.projectIds id)}}checked{{/if}}
                                       {{else}}
                                           {{#if hasAccess}}checked{{/if}}
                                       {{/if}}
                                       class="mr-3 w-4 h-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500">
                                <span class="text-white">{{name}}</span>
                            </label>
                        </div>
                    {{/each}}
                {{else}}
                    <p class="text-gray-400 text-sm">Nenhum projeto cadastrado. Crie projetos primeiro.</p>
                {{/if}}
            </div>
            <p class="text-gray-400 text-xs mt-2">Selecione os projetos que este cliente poderá visualizar</p>
        </div>

        <div class="flex gap-4">
            <button type="submit" 
                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                {{#if client}}Atualizar{{else}}Criar{{/if}}
            </button>
            <a href="/admin/clients" 
               class="bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                Cancelar
            </a>
        </div>
    </form>
</div>

